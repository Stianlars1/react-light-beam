{"version":3,"sources":["../src/hooks/useDarkmode.tsx","../src/index.tsx"],"names":["useState","useEffect","useRef","useMotionValue","useTransform","jsx","motion"],"mappings":"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","file":"index.js","sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\n\nexport const useIsDarkmode = () => {\n  const [isDarkmode, setIsDarkmodeActive] = useState(false);\n\n  useEffect(() => {\n    const matchMedia = window.matchMedia(\"(prefers-color-scheme: dark)\");\n\n    const handleChange = () => {\n      setIsDarkmodeActive(matchMedia.matches);\n    };\n\n    // Set the initial value\n    setIsDarkmodeActive(matchMedia.matches);\n\n    // Listen for changes\n    matchMedia.addEventListener(\"change\", handleChange);\n\n    // Cleanup listener on unmount\n    return () => {\n      matchMedia.removeEventListener(\"change\", handleChange);\n    };\n  }, []);\n\n  return { isDarkmode };\n};\n","\"use client\";\nimport {motion, useMotionValue, useTransform} from \"framer-motion\";\nimport React, {useEffect, useRef} from \"react\";\nimport {LightBeamProps} from \"../types/types\";\nimport {useIsDarkmode} from \"./hooks/useDarkmode\";\n\n// Default inline styles using CSS variables for easy customization\n// Users can override via className by setting CSS variables\nconst defaultStyles: React.CSSProperties = {\n    height: \"var(--react-light-beam-height, 500px)\",\n    width: \"var(--react-light-beam-width, 100vw)\",\n    transition: \"var(--react-light-beam-transition, all 0.25s ease)\",\n    willChange: \"background, opacity\", // Specific properties for better performance\n    userSelect: \"none\",\n    pointerEvents: \"none\",\n    contain: \"layout style paint\", // CSS containment for better performance\n    WebkitTransition: \"var(--react-light-beam-transition, all 0.25s ease)\",\n    WebkitUserSelect: \"none\",\n    MozUserSelect: \"none\",\n};\n\nexport const LightBeam = ({\n                              className,\n                              style,\n                              colorLightmode = \"rgba(0,0,0, 0.5)\",\n                              colorDarkmode = \"rgba(255, 255, 255, 0.5)\",\n                              maskLightByProgress = false,\n                              fullWidth = 1.0, // Default to full width\n                              invert = false,\n                              id = undefined,\n                              onLoaded = undefined,\n                              scrollElement,\n                              disableDefaultStyles = false,\n                          }: LightBeamProps) => {\n    const elementRef = useRef<HTMLDivElement>(null);\n    const inViewProgress = useMotionValue(0);\n    const opacity = useMotionValue(0.839322);\n    const {isDarkmode} = useIsDarkmode();\n    const chosenColor = isDarkmode ? colorDarkmode : colorLightmode;\n\n    useEffect(() => {\n        onLoaded && onLoaded();\n    }, []);\n\n    useEffect(() => {\n        if (typeof window === \"undefined\") return\n\n        // Cache values that don't change during scroll (MAJOR OPTIMIZATION)\n        let cachedWindowHeight = window.innerHeight;\n        const adjustedFullWidth = 1 - fullWidth; // Only calculate once\n        const opacityMin = 0.839322;\n        const opacityRange = 1 - opacityMin; // Pre-calculate: 0.160678\n        let lastProgress = -1;\n\n        const handleScroll = () => {\n            if (!elementRef.current) return;\n\n            // OPTIMIZATION: Only call getBoundingClientRect (expensive!)\n            const rect = elementRef.current.getBoundingClientRect();\n\n            // Calculate normalized position (0-1 range)\n            const normalizedPosition = Math.max(\n                adjustedFullWidth,\n                Math.min(1, rect.top / cachedWindowHeight)\n            );\n\n            // Calculate progress (only once, not twice like before!)\n            const progress = invert ? normalizedPosition : 1 - normalizedPosition;\n\n            // Only update if change is significant (avoid micro-updates)\n            if (Math.abs(progress - lastProgress) > 0.001) {\n                lastProgress = progress;\n                // Batch updates together\n                inViewProgress.set(progress);\n                opacity.set(opacityMin + opacityRange * progress);\n            }\n        };\n\n        const handleResize = () => {\n            cachedWindowHeight = window.innerHeight; // Update cache on resize\n            handleScroll(); // Recalculate immediately\n        };\n\n        const handleScrollThrottled = throttle(handleScroll);\n        const handleResizeThrottled = throttle(handleResize);\n\n        // Default to document.body (works in modern React/Next.js setups)\n        const target = scrollElement || document.body || document.documentElement;\n\n        // Passive listeners improve scroll performance significantly\n        target.addEventListener(\"scroll\", handleScrollThrottled, {passive: true});\n        window.addEventListener(\"resize\", handleResizeThrottled, {passive: true});\n\n        // Initial call to set state\n        handleScroll();\n\n        return () => {\n            target.removeEventListener(\"scroll\", handleScrollThrottled);\n            window.removeEventListener(\"resize\", handleResizeThrottled);\n        };\n    }, [inViewProgress, opacity, scrollElement, fullWidth, invert]);\n\n    const backgroundPosition = useTransform(\n        inViewProgress,\n        [0, 1],\n        [\n            `conic-gradient(from 90deg at 90% 0%, ${chosenColor}, transparent 180deg) 0% 0% / 50% 150% no-repeat, conic-gradient(from 270deg at 10% 0%, transparent 180deg, ${chosenColor}) 100% 0% / 50% 100% no-repeat`,\n            `conic-gradient(from 90deg at 0% 0%, ${chosenColor}, transparent 180deg) 0% 0% / 50% 100% no-repeat, conic-gradient(from 270deg at 100% 0%, transparent 180deg, ${chosenColor}) 100% 0% / 50% 100% no-repeat`,\n        ]\n    );\n    const maskImageOpacity = useTransform(\n        inViewProgress,\n        [0, 1],\n        [\n            `linear-gradient(to bottom, ${chosenColor} 0%, transparent 50%)`,\n            `linear-gradient(to bottom, ${chosenColor} 0%, transparent 95%)`,\n        ]\n    );\n\n    const maskImage = maskLightByProgress\n        ? maskImageOpacity\n        : `linear-gradient(to bottom, ${chosenColor} 25%, transparent 95%)`;\n\n    const combinedClassName = `react-light-beam ${className || \"\"}`.trim();\n\n    // CRITICAL: MotionValues must be passed directly to motion.div style prop\n    // Don't spread them into plain objects or reactivity breaks!\n    const finalStyles = disableDefaultStyles\n        ? {\n            // No default styles, only motion values and user styles\n            background: backgroundPosition,\n            opacity: opacity,\n            maskImage: maskImage,\n            WebkitMaskImage: maskImage,\n            willChange: \"background, opacity\",\n            contain: \"layout style paint\", // CSS containment for better performance\n            ...style, // User styles override\n        }\n        : {\n            // Merge default styles with motion values\n            ...defaultStyles,\n            background: backgroundPosition, // MotionValue (overrides default)\n            opacity: opacity,                // MotionValue (overrides default)\n            maskImage: maskImage,            // MotionValue or string\n            WebkitMaskImage: maskImage,\n            willChange: \"background, opacity\",\n            ...style, // User styles override everything\n        };\n\n    const motionProps: any = {\n        style: finalStyles,\n        ref: elementRef,\n        className: combinedClassName,\n        ...(id ? {id} : {}),\n    };\n\n    return <motion.div {...motionProps} />;\n};\n\nconst throttle = (func: Function) => {\n    let ticking = false;\n    return function (this: any, ...args: any[]) {\n        if (!ticking) {\n            requestAnimationFrame(() => {\n                func.apply(this, args);\n                ticking = false;\n            });\n            ticking = true;\n        }\n    };\n};\n"]}